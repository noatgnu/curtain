<div class="modal-header">
  <h5 class="modal-title" id="clear-settings-title">
    <i class="bi bi-arrow-counterclockwise me-2" aria-hidden="true"></i>Clear Settings
  </h5>
  <button type="button" class="btn-close" aria-label="Close clear settings dialog" (click)="close()"></button>
</div>
<div class="modal-body" aria-labelledby="clear-settings-title">
  <p class="mb-3">Select which settings you want to restore to default:</p>

  <div class="card mb-3">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h6 class="mb-0" id="settings-to-clear-heading">Settings to Clear</h6>
      <div role="group" aria-label="Selection controls">
        <button class="btn btn-sm btn-outline-primary me-2" (click)="toggleAll(true)" aria-label="Select all settings">
          <i class="bi bi-check-all me-1" aria-hidden="true"></i>Select All
        </button>
        <button class="btn btn-sm btn-outline-secondary" (click)="toggleAll(false)" aria-label="Deselect all settings">
          <i class="bi bi-x-lg me-1" aria-hidden="true"></i>Deselect All
        </button>
      </div>
    </div>
    <div class="list-group list-group-flush">
      @for (setting of settings; track setting.key) {
        <div class="list-group-item">
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="setting.selected"
              [id]="'setting-' + setting.key">
            <label class="form-check-label w-100" [for]="'setting-' + setting.key">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <strong>{{setting.label}}</strong>
                  <div class="text-muted small">{{setting.description}}</div>
                </div>
              </div>
            </label>
          </div>
        </div>
      }
    </div>
  </div>

  <div class="alert alert-warning d-flex align-items-center" role="alert">
    <i class="bi bi-exclamation-triangle-fill me-2" aria-hidden="true"></i>
    <div>This action cannot be undone. Selected settings will be restored to their default values.</div>
  </div>

  <div class="form-check">
    <input
      class="form-check-input"
      type="checkbox"
      [checked]="remember()"
      (change)="remember.set($any($event.target).checked)"
      id="rememberClearSettings">
    <label class="form-check-label" for="rememberClearSettings">
      Remember my selection and don't ask me again
    </label>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="close()" aria-label="Cancel and close dialog">
    <i class="bi bi-x-circle me-1" aria-hidden="true"></i>Cancel
  </button>
  <button
    type="button"
    class="btn btn-danger"
    (click)="ok()"
    [disabled]="!hasSelectedSettings"
    aria-label="Clear selected settings">
    <i class="bi bi-arrow-counterclockwise me-1" aria-hidden="true"></i>Clear Selected Settings
  </button>
</div>
