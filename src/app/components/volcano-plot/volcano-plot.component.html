
<div class="row">
  <div class="col-7">
    <plotly-plot
      [divId]="'volcanoPlot'"
      [data]="graphData"
      [layout]="graphLayout"
      [config]="config"
      [updateOnDataChange]="true"
      [updateOnLayoutChange]="true"
      (plotlyClick)="selectData($event)"
      (selected)="selectData($event)"
      (legendClick)="legendClickHandler($event)"
    ></plotly-plot>
  </div>
  <div class="col-5">
    <div class="card">
      <div class="card-body">
        <div class="d-flex">
          <div class="p-2">
            <label for="significant">
              Significant Cutoff
            </label>
            <input id="significant" type="number" class="form-control" [(ngModel)]="settings.settings.pCutoff">
          </div>
          <div class="p-2">
            <label for="foldchange">
              Log2 Fold Change Cutoff
            </label>
            <input id="foldchange" type="number" class="form-control" [(ngModel)]="settings.settings.log2FCCutoff">
          </div>
        </div>
        <div class="d-flex">
          <div class="p-2">
            <label for="maxX">
              Max X axis
            </label>
            <input id="maxX" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.maxX">
          </div>
          <div class="p-2">
            <label for="minX">
              Min X axis
            </label>
            <input id="minX" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.minX">
          </div>
        </div>
        <div class="d-flex">
          <div class="p-2">
            <label for="maxY">
              Max Y axis
            </label>
            <input id="maxY" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.maxY">
          </div>
          <div class="p-2">
            <label for="minY">
              Min Y axis
            </label>
            <input id="minY" type="number" class="form-control" [(ngModel)]="settings.settings.volcanoAxis.minY">
          </div>
        </div>
        <div class="d-flex">
          <div class="p-2">
            <label for="plotTitle">
              Plot Title
            </label>
            <input id="plotTitle" type="text" class="form-control" [(ngModel)]="settings.settings.volcanoPlotTitle">
          </div>
          <div class="p-2">
            <label for="markerSize">Marker Size</label>
            <input id="markerSize" type="number" class="form-control" [(ngModel)]="markerSize">
          </div>
        </div>
        <div class="d-flex">
          <div class="p-2">
            <div class="form-group">

              <label class="form-check-label" for="custom-volcano-text-col">Custom Popup Label Column</label>
              <select id="custom-volcano-text-col" [(ngModel)]="settings.settings.customVolcanoTextCol" class="form-control">
                <option [value]="''">Default</option>
                <option *ngFor="let col of dataService.differential.df.getColumnNames()" [value]="col">{{col}}</option>
              </select>
              <small class="text-muted">Changes here will only affect newly added annotation ids.</small>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div class="p-2">
            <div class="form-check">
              <input type="checkbox" id="backgroundGrey" class="form-check-input" [(ngModel)]="settings.settings.backGroundColorGrey">
              <label class="form-check-label" for="backgroundGrey">Set Background Data Points Grey</label>
            </div>
          </div>
          <div class="p-2">
            <div class="form-check">
              <input type="checkbox" id="scattergl" class="form-check-input" [(ngModel)]="scattergl">
              <label class="form-check-label" for="scattergl">scattergl backend</label>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <div class="row">
          <div class="col">
            <div ngbDropdown class="d-inline-block">
              <button type="button" class="btn btn-primary" id="volcanoAction" ngbDropdownToggle>
                Volcano Plot Actions
              </button>
              <div ngbDropdownMenu aria-labelledby="volcanoAction">
                <button ngbDropdownItem (click)="drawVolcano()">Redraw Plot</button>
                <button ngbDropdownItem (click)="FDRCurveSettings()">Custom FDR Curve</button>
                <button ngbDropdownItem (click)="openCustomColor()">Custom Legend Color</button>
                <button ngbDropdownItem (click)="openTextEditor()">Annotation Text Editor</button>
                <button ngbDropdownItem (click)="dataService.clear()">Clear Selections</button>
                <!--<button ngbDropdownItem (click)="download()">Download SVG</button>
              -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
