<div class="modal-header">
  <h5 class="modal-title">Rank Plot Text Annotation Editor</h5>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body">
  @for (f of forms; track f; let i = $index) {
    <form [formGroup]="f" [attr.aria-labelledby]="'annotation-heading-' + i">
      <h5 [id]="'annotation-heading-' + i">{{f.value["annotationID"]}}</h5>
      <div class="d-flex">
        <div class="p-2">
          <div class="form-check">
            <input
              class="form-check-input"
              formControlName="showannotation"
              type="checkbox"
              [id]="'showannotation-' + i">
            <label class="form-check-label" [for]="'showannotation-' + i">Show Annotation</label>
          </div>
        </div>
        <div class="p-2">
          <div class="form-check">
            <input
              class="form-check-input"
              formControlName="showarrow"
              type="checkbox"
              [id]="'showarrow-' + i">
            <label class="form-check-label" [for]="'showarrow-' + i">Show Arrow</label>
          </div>
        </div>
      </div>
      <div class="d-flex">
        <div class="p-2">
          <div class="form-group">
            <label [for]="'arrowhead-' + i">Arrow Head Type</label>
            <input
              type="number"
              class="form-control"
              formControlName="arrowhead"
              [id]="'arrowhead-' + i"
              min="0"
              max="8">
          </div>
        </div>
        <div class="p-2">
          <div class="form-group">
            <label [for]="'arrowsize-' + i">Arrow Size</label>
            <input
              type="number"
              class="form-control"
              formControlName="arrowsize"
              [id]="'arrowsize-' + i"
              min="0.1"
              step="0.1">
          </div>
        </div>
        <div class="p-2">
          <div class="form-group">
            <label [for]="'arrowwidth-' + i">Arrow Width</label>
            <input
              type="number"
              class="form-control"
              formControlName="arrowwidth"
              [id]="'arrowwidth-' + i"
              min="0.1"
              step="0.1">
          </div>
        </div>
        <div class="p-2">
          <div class="form-group">
            <label [for]="'ax-' + i">X axis offset</label>
            <input
              type="number"
              class="form-control"
              formControlName="ax"
              [id]="'ax-' + i">
          </div>
        </div>
        <div class="p-2">
          <div class="form-group">
            <label [for]="'ay-' + i">Y axis offset</label>
            <input
              type="number"
              class="form-control"
              formControlName="ay"
              [id]="'ay-' + i">
          </div>
        </div>
      </div>
      <div class="d-flex">
        <div class="p-2">
          <div class="form-group">
            <label [for]="'fontsize-' + i">Font Size</label>
            <input
              type="number"
              class="form-control"
              formControlName="fontsize"
              [id]="'fontsize-' + i"
              min="1">
          </div>
        </div>
        <div class="p-2">
          <div class="form-group">
            <label [for]="'fontcolor-' + i">Font Color</label>
            <input
              (colorPickerChange)="updateColor($event, f.value['annotationID'])"
              formControlName="fontcolor"
              [(colorPicker)]="colorMap[f.value['annotationID']]"
              class="form-control"
              [style.background-color]="colorMap[f.value['annotationID']]"
              [id]="'fontcolor-' + i"
              aria-label="Select font color for annotation">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label [for]="'text-' + i">Annotation Text</label>
        <textarea
          class="form-control"
          formControlName="text"
          [id]="'text-' + i"
          rows="3">
        </textarea>
      </div>
    </form>
    <hr aria-hidden="true">
  }
</div>
<div class="modal-footer">
  <button class="btn btn-primary" (click)="modal.close(forms)" aria-label="Save annotation changes and close">Submit</button>
  <button class="btn btn-danger" (click)="modal.dismiss()" aria-label="Discard changes and close">Close</button>
</div>
